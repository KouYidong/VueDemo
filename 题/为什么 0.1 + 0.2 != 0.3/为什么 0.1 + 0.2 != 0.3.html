<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>为什么 0.1 + 0.2 != 0.3</title>
</head>

<body>
  <script>
    /*
      js 采用 IEEE 754 双精度版本，
      在计算机中通过 二进制 存储东西，
      0.1 在二进制中是一个无限循环的数字，很多十进制小数用二进制表示都是无限循环的，
      但是 js 采用的浮点数标准会裁掉我们的数字，
      也就是 无限循环的小数会被裁掉部分，就会出现精度丢失的问题，导致 0.1 不再是 0.1
    */
    // 证实 0.1
    console.log(0.100000000000000002 === 0.1) // true
    // 证实 0.2
    console.log(0.200000000000000002 === 0.1) // true
    // 所以
    console.log(0.1 + 0.2 === 0.30000000000000004) // true
    // 但是为什么 console.log(0.1) 是正确的呢
    // 因为在输入内容的时候 二进制 被转换成了 十进制，十进制 又被转换成了字符串，
    // 在转换的过程中发生了取 近似值 的过程，所以打印出来的其实是一个近似值
    // 验证
    console.log(0.100000000000000002) // 0.1
    // 解决 0.1 + 0.2 != 0.3 的办法
    // toFixed() 小数点后的位数
    console.log(parseFloat((0.1 + 0.2).toFixed(10)) === 0.3) // true
  </script>
</body>

</html>